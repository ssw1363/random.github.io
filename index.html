<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./css/style.css" />
    <script src="./js/main.js"></script>
    <title>YES/NO 랜덤 질문</title>
  </head>
  <body>
    <!-- 페이지 3개 -->
    <!-- 기본((main) , 결과(result) , 세팅(setting)  -->
    <div id="header" class="main">
      <div class="header_btn" onclick="swich_page()"></div>
    </div>
    <div id="content">
      <div id="content_main" class="content_box">
        <img id="pick_btn" onclick="pick_number()" src="./images/yes.png" />
      </div>
      <div id="content_setting" class="content_box">
        <span style="font-size: 1.5rem">매운맛은 57번부터 ♥</span> <br />
        <label for="start">시작번호 </label>
        <input id="start" name="start" type="number" value="1" /><br />
        <label for="end">마지막번호 </label>
        <input type="number" id="end" name="end" value="56" />
      </div>
      <div id="content_result" class="content_box">
        <span id="result_box"></span><br />
        <img
          id="again_btn"
          onclick="pick_number()"
          src="./images/again_btn.png"
        />
      </div>
    </div>
    <div id="footer"></div>
  </body>
  <script>
    let list;
    // let start ;
    // let end = 100;
    const header = document.getElementById("header");
    const content = document.getElementById("content");
    const content_box = document.getElementsByClassName("content_box");
    const picked_list = [];
    async function load_json() {
      let data = await fetch("./resource/question_list.json");
      list = await data.json();
    }
    load_json();
    function pick_number() {
      // 설정된 값에서 난수 뽑기
      var random = Math.floor(
        Math.random() * (end.value - start.value) + start.value + 1
      );
      // alert(list[random]);
      if (picked_list.includes(picked_list)) {
        pick_number();
      } else {
        header.classList.replace("main", "result");
        set_page("content_result");
        result_box.innerText = list[random];
        picked_list.push(random);
      }
    }
    function swich_page() {
      var cur_page = header.classList[0];
      switch (cur_page) {
        case "main":
          header.classList.replace("main", "setting");
          console.log("1", header);
          set_page("content_setting");
          break;
        case "setting":
          header.classList.replace("setting", "main");
          console.log("2", header);
          set_page("content_main");
          picked_list.length = 0;
          break;
        case "result":
          header.classList.replace("result", "main");
          console.log("3", header);
          set_page("content_main");
          break;
      }
      header.classList[1];
    }
    function set_page(cur) {
      for (let i = 0; i < content_box.length; i++) {
        const element = content_box[i];
        element.style.display = "none";
      }
      var cur_page = document.getElementById(cur);
      cur_page.style.display = "block";
    }
  </script>
</html>
